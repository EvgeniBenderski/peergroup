- @title = t(".title", :default => "Ideas")

%article
  %header
    %h1= t(".heading", :default => "Ideas")

  %p.head= t(".topic", :default => "Current topic")
  = render "topics/topic", :topic => @supervision.topic

  %p.head= t(".questions", :default => "Questions")
  = render "topic_questions/questions"

  = render "ideas"

  - if @supervision.problem_owner?(current_user)

    - if @supervision.ideas.empty?
      %p.no_idea= t(".no_ideas", :default => "Wait for some ideas")

    - if @supervision.state == "idea_feedback"
      %p= t(".feedback.info", :default => "Provide the feedback on ideas")

      = semantic_form_for([@supervision, @ideas_feedback]) do |f|
        = f.inputs do
          = f.input :content
        = f.buttons do
          = f.commit_button t(".ideas_feedback.submit", :default => "Submit")

  - else

    - if @supervision.voted_on_next_step?(current_user) || @supervision.state == "idea_feedback"
      %p= t(".waiting_for_feedback", :default => "Wait for %{problem_owner}'s feedback", :problem_owner => @supervision.problem_owner.name)
    - elsif @supervision.state == "idea"
      %p= t(".step_description", :default => "Any ideas?")

      = semantic_form_for([@supervision, @idea]) do |f|
        = f.inputs do
          = f.input :content
        = f.buttons do
          = f.commit_button t(".idea.submit", :default => "Submit")
          = link_to(t(".idea.no_more", :default => "I have no more ideas"), supervision_votes_path(@supervision), :method => :post)

